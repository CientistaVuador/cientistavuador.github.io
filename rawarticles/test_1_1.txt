#ID 2
#DATE 2024/09/03 02:40 By Cien
#TITLE Morbi a bibendum purus. Suspendisse potenti. Suspendisse cursus dui at 
#DESCRIPTION vitae fermentum justo mattis. Etiam gravida, nisi at commodo semper, turpis diam luctus odio,

#SECTION Commodo dolor. Suspendisse v

#SUBSECTION Sed viverra enim vitae consectetu

#BEGIN TEXT
Proin convallis condimentum commodo. Phasellus eu mauris vitae ipsum sollicitudin
iaculis id sed diam. Integer non nulla rutrum leo ultrices congue sit amet eleifend elit.
Maecenas efficitur porttitor risus sit amet iaculis. Phasellus sit amet justo eu elit dictum
tristique. Curabitur diam odio, vehicula venenatis tincidunt non, ullamcorper id dolor. 
Pellentesque sodales aliquam nisi, suscipit mattis nisl suscipit sed. Donec non ligula nisl.
Suspendisse id arcu et sapien cursus mattis vel ut dolor.
#END

#SUBSECTION Fringilla at semper vitae, viverra sed justo.

#BEGIN TEXT
 Maecenas sit amet massa sit amet dui hendrerit varius. Sed viverra enim
 vitae consectetur finibus. Morbi condimentum hendrerit sapien vitae volutpat.
 Pellentesque iaculis tempus metus id ornare. Donec vehicula semper nisi vel ultricies.
 Aliquam ac sodales libero, a viverra sem. Integer vestibulum elit a arcu molestie,
 vitae fermentum justo mattis. Etiam gravida, nisi at commodo semper, turpis diam luctus odio,
 at ultricies tortor arcu vel augue.
#END

#SECTION Phasellus rhoncus sed nunc non

#SUBSECTION Etiam gravida, nisi at commodo semper,

#BEGIN TEXT
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse erat quam,
condimentum ultrices congue sed, ultricies eu mi. Class aptent taciti sociosqu ad litora
torquent per conubia nostra, per inceptos himenaeos. Phasellus tristique auctor leo,
non laoreet nibh. Aliquam maximus odio vel augue rhoncus, hendrerit mattis metus pellentesque.
Duis eget sodales nibh, quis volutpat dui. Sed sit amet odio ut felis porttitor rhoncus vel ac
eros. Morbi a bibendum purus. Suspendisse potenti. Suspendisse cursus dui at purus fermentum,
accumsan lobortis turpis tincidunt. Mauris augue erat, fermentum non ante in, luctus interdum
nisl. Phasellus rhoncus sed nunc non varius. Quisque finibus lectus eget orci convallis,
ut pellentesque nibh suscipit. Ut a dolor ut ipsum condimentum luctus ac sit amet tortor.
Curabitur condimentum consectetur dui, et fringilla mauris aliquam id.
#END

#BEGIN TEXT
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse erat quam,
condimentum ultrices congue sed, ultricies eu mi. Class aptent taciti sociosqu ad litora
torquent per conubia nostra, per inceptos himenaeos. Phasellus tristique auctor leo,
non laoreet nibh. Aliquam maximus odio vel augue rhoncus, hendrerit mattis metus pellentesque.
Duis eget sodales nibh, quis volutpat dui. Sed sit amet odio ut felis porttitor rhoncus vel ac
eros. Morbi a bibendum purus. Suspendisse potenti. Suspendisse cursus dui at purus fermentum,
accumsan lobortis turpis tincidunt. Mauris augue erat, fermentum non ante in, luctus interdum
nisl. Phasellus rhoncus sed nunc non varius. Quisque finibus lectus eget orci convallis,
ut pellentesque nibh suscipit. Ut a dolor ut ipsum condimentum luctus ac sit amet tortor.
Curabitur condimentum consectetur dui, et fringilla mauris aliquam id.
#END

#SUBSECTION Quisque finibus lectus eget orci convallis, ut pellentesque nibh suscipit.

#BEGIN TEXT
Mauris elit nisl, tincidunt in enim vel, varius commodo dolor. Suspendisse vitae tempor enim
Quisque sodales massa eget suscipit interdum. Aliquam erat volutpat. Donec in augue tincidunt
porta elit non, ornare tellus. Etiam rutrum, lectus sit amet gravida aliquam, nibh ante lacinia
purus, eget porta nunc justo eget lacus. Quisque in dui eleifend, finibus nibh ac, tincidunt
tellus. Phasellus non vehicula diam, a tristique eros. Vestibulum metus arcu, elementum at
ornare eu, congue eget quam. Suspendisse potenti. Donec convallis sem nec leo ultrices vulputate.
#END

#BEGIN FINE
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Nunc sollicitudin feugiat tortor, maximus dapibus neque dictum sit amet.
Praesent in urna consequat, auctor lorem sit amet, efficitur augue.
Nunc fringilla tincidunt ultrices. Nunc luctus lorem id pulvinar volutpat.
Etiam semper tellus massa,
sed accumsan nunc porta et. Donec posuere nunc.
#END

#BEGIN WARNING
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam faucibus ligula
sed nunc feugiat laoreet. Donec vel feugiat lacus. Suspendisse ultricies dui
non augue tempor, in pellentesque ante tristique. Sed sed cursus quam. Quisque
volutpat molestie ex.
Nunc interdum mi non vulputate pulvinar. Pellentesque finibus in felis sit amet porta.
#END

#BEGIN SEVERE
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Proin tellus libero, hendrerit vitae urna in, dictum accumsan massa.
Orci varius natoque penatibus et magnis dis parturient montes,
nascetur ridiculus mus. Ut nibh turpis, lobortis non vestibulum blandit,
cursus at sem. Proin lobortis nisl sit amet mi bibendum lacinia. Nunc scelerisque.
#END

#BEGIN CODE
private static void encodeTo(float r, float g, float b, int index, byte[] data) {
    int mR = 255;
    int mG = 255;
    int mB = 255;
    int exp = 255;
    
    encode:
    {
        if (!Float.isFinite(r) || !Float.isFinite(g) || !Float.isFinite(b)) {
            break encode;
        }
        r = Math.min(Math.max(r, 0f), MAX_VALUE);
        g = Math.min(Math.max(g, 0f), MAX_VALUE);
        b = Math.min(Math.max(b, 0f), MAX_VALUE);
        
        float intensity = Math.max(r, Math.max(g, b));
        if (intensity < MIN_VALUE) {
            mR = 0;
            mG = 0;
            mB = 0;
            exp = 0;
            break encode;
        }
        
        exp = (int) Math.ceil((Math.log(intensity) * INVERSE_LOG_BASE) + BIAS); gdfg dfg dfg fdg fdg fdg dfg fd gfd gdf gfdg dfg dfg dfg dfg dfg dfg df gdfg dfg df 
        exp = Math.min(Math.max(exp, 0), MAX_EXPONENT);
        
        intensity = LOOKUP_TABLE[exp];
        
        r /= intensity;
        g /= intensity;
        b /= intensity;
        
        mR = Math.min(Math.max(Math.round(r * 255f), 0), 255);
        mG = Math.min(Math.max(Math.round(g * 255f), 0), 255);
        mB = Math.min(Math.max(Math.round(b * 255f), 0), 255);
    }
    
    data[0 + index] = (byte) mR;
    data[1 + index] = (byte) mG;
    data[2 + index] = (byte) mB;
    data[3 + index] = (byte) exp;
}
#END

#IMAGE ../resources/testimage.jpg